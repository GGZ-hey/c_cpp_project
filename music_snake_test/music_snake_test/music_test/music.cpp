#include "music.h"
#include <iostream>
#include <Windows.h>
using namespace std;

unsigned pitch[4][7] = {
	//Do Re Mi Fa So La Si
	{ 131, 147, 165, 175, 196, 220, 247 },//低度音
	{ 262, 294, 330, 349, 392, 440, 494 },//中度音
	{ 523, 587, 659, 698, 784, 880, 988 },//高度音
	{ 1046, 1175, 1318, 1397, 1568, 1760, 1967 } };//高八度

struct str_music
{
	char tune;//音调
	char tone;//音色
	int hold;//音长
};

static struct str_music star[] = {
	{ 3, 1, 500 }, { 3, 1, 500 }, { 3, 5, 500 }, { 3, 5, 500 }, { 3, 6, 500 }, { 3, 6, 500 }, { 3, 5, 1000 },
	{ 3, 4, 500 }, { 3, 4, 500 }, { 3, 3, 500 }, { 3, 3, 500 }, { 3, 2, 500 }, { 3, 2, 500 }, { 3, 1, 1000 },
	{ 3, 5, 500 }, { 3, 5, 500 }, { 3, 4, 500 }, { 3, 4, 500 }, { 3, 3, 500 }, { 3, 3, 500 }, { 3, 2, 1000 },
	{ 3, 5, 500 }, { 3, 5, 500 }, { 3, 4, 500 }, { 3, 4, 500 }, { 3, 3, 500 }, { 3, 3, 500 }, { 3, 2, 1000 },
	{ 3, 1, 500 }, { 3, 1, 500 }, { 3, 5, 500 }, { 3, 5, 500 }, { 3, 6, 500 }, { 3, 6, 500 }, { 3, 5, 1000 },
	{ 3, 4, 500 }, { 3, 4, 500 }, { 3, 3, 500 }, { 3, 3, 500 }, { 3, 2, 500 }, { 3, 2, 500 }, { 3, 1, 1000 }
};

int n[98] = {
	251, 251, 251, 251, 231, 241, 252, 272, 261, 261, 261, 261, 241, 261, 252, 252,
	251, 251, 251, 251, 271, 261, 251, 241, 242, 241, 241, 241, 241, 231, 221,
	212, 212, 251, 251, 251, 251, 231, 241, 252, 272, 261, 261, 261, 261, 241, 261, 252, 252,
	251, 251, 251, 251, 271, 261, 251, 241, 242, 241, 241, 241, 241, 231, 221, 212, 212,
	311, 311, 311, 311, 251, 261, 312, 332, 321, 321, 321, 321, 311, 271,
	262, 262, 271, 271, 271, 271, 271, 311, 322, 252, 271, 271, 311, 321, 311, 271, 312, 312
};

int n1[99] = {
	271, 261, 271, 252, 261, 241, 231, 221, 231, 241, 231, 252, 231, 221, 231, 251, 221, 231, 242, 231, 221, 213, 251, 171, 221, 161, 211, 153, 161, 211, 153,
	132, 152, 161, 212, 221, 161, 211, 151, 252, 311, 261, 251, 231, 251, 223, 222, 231, 171, 161, 152, 161, 211, 221, 131, 211,
	161, 151, 161, 211, 153, 232, 251, 171, 221, 161, 211, 152, 131, 151, 131, 151, 161, 171, 221, 163, 151, 161, 212, 221, 251, 231, 221, 231, 221,
	211, 161, 151, 132, 212, 162, 211, 161, 151, 131, 151, 161, 211, 153//,231,251,221,231,221,211,171,161,153
};

void music_song(str_music* song,int size)
{
	for (int i = 0; i < size; i++)
	{
		Beep(pitch[song[i].tone - 1][song[i].tune - 1], song[i].hold);
	}
}

void music_song(int* song, int size)
{
	for (int i = 0; i < size; i++)
	{
		Beep(pitch[song[i]/100 - 1][song[i]/10%10 - 1], song[i]%10*200);
	}
}

void music(void)
{
	int sel;
	while (1)
	{
		cout << "请选择歌曲：1-3，0-退出" << endl;
		cin >> sel;
		switch (sel)
		{
		case 0:
			return;
		case 1:
			music_song(star, sizeof(star) / sizeof(str_music));
			break;
		case 2:
			music_song(n, sizeof(n) / sizeof(int));
			break;
		case 3:
			music_song(n1, sizeof(n1) / sizeof(int));
			break;
		default:
			cout << "输入错误" << endl;
		}
	}
}